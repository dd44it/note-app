<!-- PAGE HEADER -->
<app-header>
  <app-theme-toggle></app-theme-toggle>
</app-header>

<div class="main-content">
  <!-- HERO SECTION -->
  <section class="hero">
    <div class="container">
      <h2 class="hero-title">A modern SSR-powered blog</h2>
      <p class="hero-subtitle">
        Built with Angular 20 + SSR + Node.js (Express). Lightning-fast SEO,
        dynamic content & great performance.
      </p>

      <!-- FEATURED NOTE -->
      @if (notesStats$ | async; as stats) {
        @if (stats.latest; as latest) {
          <div class="featured">
            <h3>Featured Note</h3>
            <a [routerLink]="['/note', latest.id]" class="featured-card">
              <div class="note-content">
                <h4>{{ latest.title }}</h4>
                <p>{{ latest.content }}</p>
              </div>
            </a>
          </div>
        }
      }
    </div>
  </section>

  <!-- NOTES LIST -->
  <section class="notes-section">
    <div class="container">
      <h3>Latest Notes</h3>

      @if (notes$ | async; as notes) {
        @if (notes.length > 0) {
          <div class="notes-grid">
            @for (note of notes; track note) {
              <div class="note-card">
                <div class="note-content">
                  <h4>{{ note.title }}</h4>
                  <p>{{ note.content }}</p>
                  <a [routerLink]="['/note', note.id]" class="read-more">
                    Read →
                  </a>
                </div>
              </div>
            }
          </div>
        } @else {
          <p class="empty-state">
            No notes yet. Add your first one to see it here ✍️
          </p>
        }
      } @else {
        <p class="empty-state">
          No notes yet. Add your first one to see it here ✍️
        </p>
      }

    </div>
  </section>

  <!-- UNSPLASH GALLERY -->
  <section class="image-section">
    <div class="container">
      <h2>Inspiration Gallery</h2>

      <div class="images-grid">
        @for (img of inspiration$ | async; track img; let i = $index) {
          <ui-image-card
            [image]="img"
            (open)="openLightbox(i)">
          </ui-image-card>
        }
      </div>
    </div>
  </section>

  <!-- LIGHTBOX -->
  @if (lightboxOpen) {
    <ui-image-lightbox
      [images]="images"
      [index]="lightboxIndex"
      (close)="lightboxOpen = false">
    </ui-image-lightbox>
  }
</div>

<!-- FOOTER -->
<footer class="footer">
  <p>© {{ year }} Angular 20</p>
</footer>
