<!-- PAGE HEADER -->
<app-header>
  <app-theme-toggle></app-theme-toggle>
</app-header>

<div class="main-content">
  <!-- HERO SECTION -->
  <section class="hero">
    <div class="container">
      <h2 class="hero-title">A modern SSR-powered blog</h2>
      <p class="hero-subtitle">
        Built with Angular 20 + SSR + Node.js (Express). Lightning-fast SEO,
        dynamic content & great performance.
      </p>

      <!-- FEATURED NOTE -->
      <ng-container *ngIf="notesStats$ | async as stats">
        <ng-container *ngIf="stats.latest as latest">
          <div class="featured">
            <h3>Featured Note</h3>

            <a [routerLink]="['/note', latest.id]" class="featured-card">
              <div class="note-content">
                <h4>{{ latest.title }}</h4>
                <p>{{ latest.content }}</p>
              </div>
            </a>
          </div>
        </ng-container>
      </ng-container>
    </div>
  </section>

  <!-- NOTES LIST -->
  <section class="notes-section">
    <div class="container">
      <h3>Latest Notes</h3>

      <ng-container *ngIf="notes$ | async as notes; else noNotes">
        <div class="notes-grid" *ngIf="notes.length > 0; else noNotes">
          <div *ngFor="let note of notes" class="note-card">
            <div class="note-content">
              <h4>{{ note.title }}</h4>
              <p>{{ note.content }}</p>

              <a [routerLink]="['/note', note.id]" class="read-more">
                Read →
              </a>
            </div>
          </div>
        </div>
      </ng-container>

      <ng-template #noNotes>
        <p class="empty-state">
          No notes yet. Add your first one to see it here ✍️
        </p>
      </ng-template>
    </div>
  </section>

  <!-- UNSPLASH GALLERY -->
  <section class="image-section">
    <div class="container">
      <h2>Inspiration Gallery</h2>

      <div class="images-grid">
        <ui-image-card
          *ngFor="let img of inspiration$ | async; let i = index"
          [image]="img"
          (open)="openLightbox(i)">
        </ui-image-card>
      </div>
    </div>
  </section>

  <!-- LIGHTBOX -->
  <ui-image-lightbox
    *ngIf="lightboxOpen"
    [images]="images"
    [index]="lightboxIndex"
    (close)="lightboxOpen = false">
  </ui-image-lightbox>
</div>

<!-- FOOTER -->
<footer class="footer">
  <p>© {{ year }} Angular 20</p>
</footer>
